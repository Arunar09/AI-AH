<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive AWS Operations Dashboard (Enhanced for Study)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cyber Operations -->
    <!-- Application Structure Plan: The SPA is designed as a multi-section dashboard. A fixed top navigation allows users to switch between high-level themes (Infrastructure, DevSecOps, Architecture, etc.), which mirrors the report's logical grouping but in a non-linear, accessible format. Each theme's section uses a card-based layout to present sub-topics. Clicking "View Details" on a card now triggers a large modal window (75-80% screen space) to display comprehensive technical information. This modal approach was chosen to provide a focused, immersive reading experience for detailed content without cluttering the main dashboard, enhancing clarity and ease of study. Enhancements include Copy to Clipboard for code/logs, more detailed trend charts, and expanded Best Practices/Troubleshooting sections within modals. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Regional CPU/Memory Usage -> Goal: Compare -> Viz: Bar Chart -> Interaction: Hover for tooltips -> Justification: Directly compares resource utilization across regions for quick health assessment. -> Library: Chart.js
        - Report Info: Daily Cost Breakdown -> Goal: Inform Proportions -> Viz: Donut Chart -> Interaction: Hover for tooltips -> Justification: Clearly shows the largest cost contributors at a glance. -> Library: Chart.js
        - Report Info: Security Vulnerabilities -> Goal: Compare Severity -> Viz: Bar Chart -> Interaction: Hover for tooltips -> Justification: Highlights the most critical security issues that need immediate attention. -> Library: Chart.js
        - Report Info: IAM MFA Enablement -> Goal: Inform Status -> Viz: Pie Chart -> Interaction: Hover for tooltips -> Justification: Simple and effective visualization for a key security compliance metric. -> Library: Chart.js
        - Report Info: CI/CD Build Success Rate Trend -> Goal: Track Change -> Viz: Line Chart -> Interaction: Hover for tooltips -> Justification: Shows historical performance of CI/CD, crucial for identifying degradation or improvement over time. -> Library: Chart.js
        - Report Info: Textual Explanations & Recommendations -> Goal: Organize & Inform -> Viz: Modal pop-up with HTML/Tailwind content -> Interaction: Click "View Details" to open/close modal -> Justification: Provides a dedicated, large viewing area for detailed technical content, preventing information overload on the main dashboard and improving readability for study purposes. Enhanced with Copy to Clipboard, expanded Best Practices, and Troubleshooting sections.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f0f4f8; }
        .nav-link { transition: all 0.2s ease-in-out; }
        .nav-link.active, .nav-link:hover { color: #4f46e5; border-bottom-color: #4f46e5; }
        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        .kpi-card { background-color: #ffffff; border: 1px solid #e5e7eb; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .kpi-card:hover { transform: translateY(-4px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .chart-container { position: relative; width: 100%; max-width: 800px; margin-left: auto; margin-right: auto; height: 320px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .log-snippet, .code-block { background-color: #e2e8f0; padding: 12px; border-radius: 8px; font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace; font-size: 0.85em; overflow-x: auto; margin-top: 10px; position: relative;}
        .copy-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: #4f46e5;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75em;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }
        .copy-btn:hover { opacity: 1; }
        .copy-btn.copied { background-color: #10b981; } /* Green when copied */

        /* Modal specific styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 75vw;
            height: 80vh;
            max-width: 1200px; /* Max width for very large screens */
            max-height: 900px; /* Max height for very large screens */
            overflow-y: auto;
            padding: 24px;
            position: relative;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        .modal-overlay.show .modal-content {
            transform: scale(1);
        }
        .modal-close-button {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #6b7280;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.2s ease, color 0.2s ease;
        }
        .modal-close-button:hover {
            background-color: #f0f4f8;
            color: #374151;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="bg-white shadow-md">
        <header class="container mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">AWS Operations & DevSecOps Interactive Report (Enhanced for Study)</h1>
            <p class="text-sm sm:text-base text-gray-600 mt-1">An interactive dashboard for exploring AWS services and daily operations, with a focus on technical details for study.</p>
        </header>
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8 border-b border-gray-200">
            <ul class="flex flex-wrap -mb-px font-medium text-center text-gray-500">
                <li class="mr-2"><a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg active" data-section="infra">Infrastructure Health</a></li>
                <li class="mr-2"><a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg" data-section="devsecops">DevSecOps</a></li>
                <li class="mr-2"><a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg" data-section="arch">Architecture</a></li>
                <li class="mr-2"><a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg" data-section="security">Security & Compliance</a></li>
                <li class="mr-2"><a href="#" class="nav-link inline-block p-4 border-b-2 border-transparent rounded-t-lg" data-section="automation">Automation & IaC</a></li>
            </ul>
        </nav>
    </div>
	
<!-- Back to Landing Page Button -->
    <a href="./index.html" class="fixed top-4 left-4 z-50 bg-purple-700 text-white py-2 px-4 rounded-lg shadow-lg hover:bg-purple-800 transition duration-300 ease-in-out text-lg font-bold">
        &larr; Back to Hub
    </a>
	
    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        <section id="infra" class="content-section active">
            <h2 class="text-2xl font-bold mb-1">Infrastructure Health Management</h2>
            <p class="text-gray-600 mb-6">This section provides a consolidated view of your AWS infrastructure's health, focusing on proactive monitoring across regions, strategic cost governance, and deep performance analysis to ensure a reliable, performant, and cost-efficient operational state.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                
                <div class="kpi-card rounded-lg p-6 lg:col-span-2">
                    <h3 class="font-semibold text-lg">Multi-Region Resource Utilization</h3>
                    <p class="text-sm text-gray-500">CPU and Memory load across global deployments.</p>
                    <div class="mt-4">
                        <div class="chart-container">
                            <canvas id="regionHealthChart"></canvas>
                        </div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Centralized monitoring is critical for managing distributed AWS environments. By consolidating metrics from services like EC2, Lambda, and API Gateway, we gain a unified view of operational health. This allows for rapid identification of issues, such as high memory utilization in a specific region, and triggers automated responses like auto-scaling to maintain system resilience. The ability to view metrics across accounts and regions is paramount for organizations with a decentralized footprint.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Navigate to <span class="font-semibold">CloudWatch > Metrics</span> for raw data, <span class="font-semibold">CloudWatch > Alarms</span> to configure alerts, and <span class="font-semibold">EC2 > Auto Scaling Groups</span> to manage scaling policies. For cross-account visibility, configure <span class="font-semibold">CloudWatch Cross-Account Observability</span> and use the <span class="font-semibold">Cross-account cross-Region CloudWatch console</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (CloudWatch Alarm - JSON/CloudFormation):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="infra-alarm-config"><code>{
  "AlarmName": "High-CPU-us-east-1-Prod",
  "MetricName": "CPUUtilization",
  "Namespace": "AWS/EC2",
  "Statistic": "Average",
  "Period": 300,
  "EvaluationPeriods": 2,
  "Threshold": 80,
  "ComparisonOperator": "GreaterThanThreshold",
  "TreatMissingData": "notBreaching",
  "Dimensions": [ { "Name": "AutoScalingGroupName", "Value": "prod-web-asg" } ],
  "AlarmActions": [ "arn:aws:sns:us-east-1:123456789012:cloudwatch-alerts" ]
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            A common issue is an EC2 instance running out of memory, which isn't a default CloudWatch metric. You need the CloudWatch Agent to collect OS-level metrics.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> CloudWatch Logs, typically under a log group like `/aws/ec2/instance-id/cloudwatch-agent` for memory metrics, or application logs for `OutOfMemoryError`.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="infra-log-snippet"><code>[INFO] 2025-07-03T14:30:05Z [metrics] Memory utilization: 92.5%
[ERROR] 2025-07-03T14:30:10Z [application] OutOfMemoryError: Java heap space
</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Implement granular alarms for all critical resources (EC2, RDS, Lambda, etc.) with appropriate thresholds.</li>
                            <li>Use composite alarms to reduce alert fatigue by combining related alarms.</li>
                            <li>Automate alarm creation and management using Infrastructure as Code (IaC).</li>
                            <li>Regularly review and fine-tune alarm thresholds based on historical performance data.</li>
                            <li>Ensure CloudWatch Agent is deployed on EC2 instances for comprehensive OS-level metrics.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If an alarm triggers unexpectedly, check CloudWatch metrics for the specific resource over the last hour/day to identify trends.</li>
                            <li>Examine associated CloudWatch Logs for error messages or unusual activity around the alarm trigger time.</li>
                            <li>Verify Auto Scaling Group activity history if scaling actions are expected but not occurring.</li>
                            <li>Check IAM permissions for CloudWatch and Auto Scaling roles if automated actions fail.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Consider using CloudWatch Synthetics for proactive monitoring of application endpoints from various geographic locations to detect latency or availability issues before users report them. Also, be mindful of cross-region data transfer costs when consolidating logs and metrics.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Daily Cost Breakdown</h3>
                    <p class="text-sm text-gray-500">Daily spend distribution by service.</p>
                    <div class="mt-4">
                       <div class="chart-container h-64 sm:h-80">
                            <canvas id="costBreakdownChart"></canvas>
                        </div>
                        <p class="text-center font-bold text-2xl mt-4">$18,400 <span class="text-base font-normal text-gray-500">/ day</span></p>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Continuous cost management requires detailed visibility into spending patterns. By analyzing expenditures at the service level, we can pinpoint major cost drivers. Metrics on Reserved Instance (RI) utilization and Spot savings indicate the effectiveness of purchasing strategies. Identifying unused resources like EBS volumes and rightsizing opportunities are key to eliminating waste and optimizing financial governance.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Access detailed cost reports via <span class="font-semibold">AWS Cost Explorer</span>. Configure alerts in <span class="font-semibold">AWS Budgets</span>. Use <span class="font-semibold">AWS Compute Optimizer</span> for rightsizing recommendations. For consolidated billing and cost allocation, leverage <span class="font-semibold">AWS Organizations</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (AWS Budget - JSON/CLI):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="cost-budget-config"><code>{
  "BudgetName": "Monthly-EC2-Budget",
  "BudgetLimit": { "Amount": "10000", "Unit": "USD" },
  "TimeUnit": "MONTHLY",
  "BudgetType": "COST",
  "CostFilters": { "Service": ["Amazon Elastic Compute Cloud - Compute"] },
  "Notifications": [
    {
      "NotificationType": "ACTUAL",
      "Threshold": 80,
      "ThresholdType": "PERCENTAGE",
      "ComparisonOperator": "GREATER_THAN",
      "SubscriberEmailAddresses": ["devops-alerts@example.com"]
    }
  ]
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Unexpected cost spikes often occur due to unmonitored resource creation, misconfigured auto-scaling, or data transfer charges.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> AWS CloudTrail for API calls (e.g., `RunInstances`, `CreateVolume`), CloudWatch Logs for application-specific logs that might indicate increased resource usage (e.g., high traffic leading to more Lambda invocations).
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="cost-log-snippet"><code>{
  "eventSource": "ec2.amazonaws.com",
  "eventName": "RunInstances",
  "eventTime": "2025-07-03T15:00:00Z",
  "userIdentity": { "userName": "UnauthorizedUser" },
  "responseElements": { "instancesSet": { "items": [ { "instanceId": "i-0abcdef1234567890" } ] } }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Implement a robust tagging strategy for all resources to enable accurate cost allocation.</li>
                            <li>Regularly right-size resources using AWS Compute Optimizer and AWS Trusted Advisor.</li>
                            <li>Utilize Reserved Instances, Savings Plans, and Spot Instances where appropriate.</li>
                            <li>Set up granular AWS Budgets with alerts for cost anomalies and forecasts.</li>
                            <li>Implement S3 lifecycle policies and Intelligent-Tiering for storage cost optimization.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If a budget alert triggers, use Cost Explorer to identify the service and time period of the spike.</li>
                            <li>Check CloudTrail logs for recent resource creation or modification events that coincide with the cost increase.</li>
                            <li>Review CloudWatch metrics for services showing increased cost to identify usage patterns (e.g., increased Lambda invocations, EC2 CPU usage).</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Implement a robust <span class="font-semibold">cost allocation tagging strategy</span> to accurately attribute costs to teams, projects, or environments. Explore <span class="font-semibold">AWS Savings Plans</span> for flexible compute savings and utilize <span class="font-semibold">S3 Intelligent-Tiering</span> for automated storage cost optimization.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                 <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Application Performance</h3>
                    <p class="text-sm text-gray-500">Key performance indicators for user experience.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">847ms</p><p class="text-sm text-gray-500">P99 Latency</p></div>
                        <div><p class="text-2xl font-bold">0.03%</p><p class="text-sm text-gray-500">Error Rate</p></div>
                        <div><p class="text-2xl font-bold">94.2%</p><p class="text-sm text-gray-500">Cache Hit Rate</p></div>
                        <div><p class="text-2xl font-bold">423ms</p><p class="text-sm text-gray-500">Avg. Response Time</p></div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Ensuring application responsiveness requires deep visibility into performance metrics. Monitoring percentile latencies (P99) provides a more accurate view of user experience than simple averages. Integrating distributed tracing with AWS X-Ray helps identify bottlenecks across microservices, while custom metrics allow for tracking business-specific KPIs alongside infrastructure health.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Use <span class="font-semibold">CloudWatch > Metrics</span> for aggregated performance data. Explore end-to-end request flows in <span class="font-semibold">AWS X-Ray</span>. Analyze application logs in <span class="font-semibold">CloudWatch Logs Insights</span>. For synthetic monitoring, use <span class="font-semibold">CloudWatch Synthetics</span>, and for real user monitoring, <span class="font-semibold">CloudWatch RUM</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (X-Ray Daemon on EC2):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="app-perf-xray-config"><code># /etc/systemd/system/xray.service
[Unit]
Description=AWS X-Ray Daemon
After=network.target

[Service]
ExecStart=/usr/bin/xray -o
Restart=on-failure

[Install]
WantedBy=multi-user.target</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            High latency can be caused by database bottlenecks, inefficient code, or network issues.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> Application logs in CloudWatch Logs (e.g., `/aws/lambda/my-function`, `/var/log/nginx/access.log`), X-Ray traces for service map and segment details.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="app-perf-log-snippet"><code>2025-07-03T16:00:00Z [ERROR] Request ID: abc-123 - Database query timeout after 500ms for user: testuser
2025-07-03T16:00:01Z [INFO] API Gateway response: 504 Gateway Timeout for /api/data</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Monitor percentile latencies (P99, P95) for a realistic view of user experience.</li>
                            <li>Implement distributed tracing with AWS X-Ray to pinpoint bottlenecks in microservices.</li>
                            <li>Set up custom CloudWatch metrics for business-specific KPIs.</li>
                            <li>Utilize CloudWatch Logs Insights for efficient analysis of application logs.</li>
                            <li>Consider CloudFront for caching and reduced latency for global users.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For high latency, start with X-Ray traces to identify the slowest segment or service.</li>
                            <li>Check CloudWatch metrics for CPU, memory, and network I/O of underlying compute resources.</li>
                            <li>Analyze application logs for specific error messages or long-running queries.</li>
                            <li>Verify database performance metrics (e.g., CPU, connections, slow queries) if a database is suspected.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Utilize <span class="font-semibold">AWS X-Ray annotations and metadata</span> to add custom business context to traces. Implement <span class="font-semibold">custom CloudWatch metrics</span> (e.g., for specific API response times or business transaction durations) to align monitoring with business goals.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

            </div>
        </section>

        <section id="devsecops" class="content-section">
            <h2 class="text-2xl font-bold mb-1">DevSecOps Pipeline Operations</h2>
            <p class="text-gray-600 mb-6">Explore the health and efficiency of your software delivery lifecycle. This section covers CI/CD pipeline automation, continuous security validation, and transparent release management to ensure rapid, reliable, and secure deployments.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">CI/CD Pipeline Status</h3>
                    <p class="text-sm text-gray-500">Health and efficiency of automated delivery.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">24</p><p class="text-sm text-gray-500">Total Pipelines</p></div>
                        <div><p class="text-2xl font-bold text-green-600">92%</p><p class="text-sm text-gray-500">Success Rate</p></div>
                        <div><p class="text-2xl font-bold">15 min</p><p class="text-sm text-gray-500">Avg. Build Time</p></div>
                        <div><p class="text-2xl font-bold text-red-600">2</p><p class="text-sm text-gray-500">Failed Builds</p></div>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">A robust CI/CD pipeline automates the entire software delivery process, ensuring rapid and consistent releases. By using AWS services like CodePipeline for orchestration, CodeBuild for building and testing, and CodeDeploy for deployment, we minimize manual steps and human error. Defining build processes declaratively in `buildspec.yml` ensures reproducibility and version control of the build configuration itself.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Monitor pipeline execution in <span class="font-semibold">AWS CodePipeline</span>. View build logs and details in <span class="font-semibold">AWS CodeBuild</span>. Track deployments in <span class="font-semibold">AWS CodeDeploy</span>. Use <span class="font-semibold">AWS CodeArtifact</span> for centralized package management.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (buildspec.yml):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="cicd-buildspec-config"><code>version: 0.2
phases:
  install:
    runtime-versions:
      nodejs: 18
  pre_build:
    commands:
      - echo Installing dependencies...
      - npm install
  build:
    commands:
      - echo Building the application...
      - npm run build
  post_build:
    commands:
      - echo Running tests...
      - npm test
artifacts:
  files:
    - '**/*'
  base-directory: build</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Build failures often stem from dependency issues, failed tests, or insufficient build environment resources.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> CodeBuild logs within the CodeBuild console, which are streamed to CloudWatch Logs.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="cicd-log-snippet"><code>[Container] 2025/07/03 17:00:05 Running command npm test
> my-app@1.0.0 test
> react-scripts test --coverage --watchAll=false

FAIL src/App.test.js
  ● Test suite failed to run

    Cannot find module 'react' from 'App.js'

Test Suites: 1 failed, 1 total
</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Automate all stages of the CI/CD pipeline for rapid and consistent releases.</li>
                            <li>Define build processes declaratively using `buildspec.yml` for reproducibility.</li>
                            <li>Integrate automated testing (unit, integration, performance) early in the pipeline.</li>
                            <li>Monitor key pipeline metrics (success rates, build times, deployment durations) continuously.</li>
                            <li>Implement pipeline stage approvals for critical deployments.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For failed builds, review CodeBuild logs for specific error messages (e.g., dependency resolution, test failures).</li>
                            <li>Check CodePipeline history for stage failures and associated error details.</li>
                            <li>Verify IAM permissions for CodeBuild/CodeDeploy roles if services cannot access required resources.</li>
                            <li>Ensure build environment resources (e.g., compute, memory) are sufficient for the workload.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Integrate <span class="font-semibold">AWS CodeGuru Reviewer</span> for automated code quality and security analysis within the pipeline. Implement <span class="font-semibold">pipeline stage approvals</span> for critical deployments.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                <div class="kpi-card rounded-lg p-6 lg:col-span-2">
                    <h3 class="font-semibold text-lg">Security Scan Findings</h3>
                    <p class="text-sm text-gray-500">Vulnerability distribution by severity.</p>
                    <div class="mt-4">
                        <div class="chart-container">
                            <canvas id="securityScanChart"></canvas>
                        </div>
                        <h4 class="font-semibold text-md mt-4">CI/CD Build Success Rate Trend</h4>
                        <p class="text-sm text-gray-500">Historical success rate of pipeline builds over time.</p>
                        <div class="chart-container mt-4">
                            <canvas id="buildSuccessTrendChart"></canvas>
                        </div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Integrating security into the pipeline is crucial for identifying vulnerabilities early. AWS Inspector continuously scans workloads for known vulnerabilities and unintended network exposure, providing a contextualized risk score to help prioritize the highest risks. AWS Security Hub aggregates findings from multiple services, offering a unified view of the security posture and compliance status.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> View detailed findings in <span class="font-semibold">Amazon Inspector</span>. For aggregated and prioritized findings, use <span class="font-semibold">AWS Security Hub</span>. For threat detection, use <span class="font-semibold">Amazon GuardDuty</span>. For sensitive data discovery, use <span class="font-semibold">Amazon Macie</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Inspector Scan - AWS CLI):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-inspector-config"><code># AWS CLI command to enable Inspector scanning for EC2, Container Images, and Lambda
aws inspector2 enable-delegated-admin-account --admin-account-id 123456789012
aws inspector2 enable --resource-types EC2 CONTAINER_IMAGE LAMBDA</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            A common finding is an outdated library with known CVEs in a container image or an EC2 instance with critical vulnerabilities.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> Inspector findings in the Inspector console, Security Hub findings for aggregated view. GuardDuty findings for runtime threats.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-log-snippet"><code>{
  "SchemaVersion": "2021-08-20",
  "AwsAccountId": "123456789012",
  "FindingArn": "arn:aws:inspector2:us-east-1:123456789012:finding/...",
  "Severity": "HIGH",
  "Title": "CVE-2023-45678 in log4j-core:2.15.0",
  "Description": "Apache Log4j2 vulnerable to remote code execution (RCE).",
  "Resources": [
    {
      "Type": "AWS_ECR_CONTAINER_IMAGE",
      "Details": { "EcrContainerImage": { "RepositoryName": "my-app-repo", "ImageDigest": "sha256:..." } }
    }
  ],
  "VulnerabilityDetails": { "Cvss2": { "BaseScore": 7.5 } }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Enable continuous security scanning with AWS Inspector across all relevant workloads.</li>
                            <li>Utilize AWS Security Hub for centralized aggregation and prioritization of security findings.</li>
                            <li>Integrate SAST (Static Application Security Testing) and DAST (Dynamic Application Security Testing) into the CI/CD pipeline.</li>
                            <li>Regularly review and remediate critical and high-severity findings based on contextual risk scores.</li>
                            <li>Implement automated remediation for common, low-risk findings.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If a high number of findings appear, verify the scope of the scan and ensure it's not a false positive.</li>
                            <li>For specific CVEs, check public vulnerability databases for remediation steps.</li>
                            <li>Review Inspector scan reports for details on affected resources and recommended fixes.</li>
                            <li>If Security Hub isn't showing expected findings, verify service integrations and permissions.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Integrate <span class="font-semibold">Static Application Security Testing (SAST)</span> and <span class="font-semibold">Dynamic Application Security Testing (DAST)</span> tools into your CI/CD pipeline for comprehensive code and runtime security analysis.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

            </div>
        </section>
        
        <section id="arch" class="content-section">
             <h2 class="text-2xl font-bold mb-1">Architecture Design Patterns</h2>
             <p class="text-gray-600 mb-6">Dive into the fundamental architectural choices that underpin your AWS environment. This section examines microservices orchestration, serverless design patterns, and data pipeline management, highlighting their impact on scalability, resilience, and operational efficiency.</p>
             <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Microservices Health</h3>
                    <p class="text-sm text-gray-500">Status of distributed services.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">45</p><p class="text-sm text-gray-500">Total Services</p></div>
                        <div><p class="text-2xl font-bold text-green-600">98%</p><p class="text-sm text-gray-500">Availability</p></div>
                        <div><p class="text-2xl font-bold">150ms</p><p class="text-sm text-gray-500">Avg. Response Time</p></div>
                        <div><p class="text-2xl font-bold text-yellow-500">1</p><p class="text-sm text-gray-500">Degraded Service</p></div>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Microservices enhance scalability and resilience by breaking applications into independent services. Choosing the right compute (ECS, EKS, or Lambda) is critical. Decoupling through asynchronous communication patterns (SQS, SNS, EventBridge) is essential for resilience, ensuring that a single service failure does not cascade. Robust monitoring and security are integral design principles, not afterthoughts.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage container services in <span class="font-semibold">Amazon ECS</span> or <span class="font-semibold">Amazon EKS</span>. Monitor service health and logs in <span class="font-semibold">CloudWatch</span>. For service mesh capabilities, explore <span class="font-semibold">AWS App Mesh</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (ECS Service Definition - JSON):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-ecs-config"><code>{
  "serviceName": "payment-service",
  "cluster": "prod-cluster",
  "taskDefinition": "payment-task:1",
  "desiredCount": 3,
  "launchType": "FARGATE",
  "networkConfiguration": { 
    "awsvpcConfiguration": {
      "subnets": ["subnet-0abcdef1234567890", "subnet-0fedcba9876543210"],
      "securityGroups": ["sg-0123456789abcdef"],
      "assignPublicIp": "DISABLED"
    }
  },
  "loadBalancers": [ { "targetGroupArn": "arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/payment-tg/...", "containerName": "payment", "containerPort": 8080 } ]
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            A degraded microservice often shows increased error rates, container restarts, or database connection issues.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> Container logs in CloudWatch Logs (e.g., `/ecs/payment-service`), AWS X-Ray for distributed tracing across services.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-microservices-log-snippet"><code>2025-07-03T18:00:00Z [ERROR] Payment service: Failed to process transaction for order #12345. Reason: DB connection refused.
2025-07-03T18:00:01Z [WARN] ECS Task: task-id-xyz - Container 'payment' exited with code 1. Restarting.</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Choose the right compute service (ECS, EKS, Lambda) based on workload and team expertise.</li>
                            <li>Design for loose coupling using asynchronous communication (SQS, SNS, EventBridge).</li>
                            <li>Implement robust monitoring (CloudWatch, X-Ray) and security (IAM, WAF) from the start.</li>
                            <li>Define clear service boundaries and APIs for inter-service communication.</li>
                            <li>Automate deployment and scaling of individual microservices.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For degraded services, check individual service logs and metrics for errors or resource exhaustion.</li>
                            <li>Use X-Ray to trace requests across microservices and identify the failing component.</li>
                            <li>Verify network connectivity and security group rules between services.</li>
                            <li>Check for deadlocks or contention in shared resources like databases.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Explore <span class="font-semibold">event sourcing</span> and <span class="font-semibold">saga patterns</span> for complex distributed transactions in microservices. Implement a <span class="font-semibold">circuit breaker pattern</span> to prevent cascading failures.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Serverless Operations</h3>
                    <p class="text-sm text-gray-500">Key metrics for Lambda functions.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">120</p><p class="text-sm text-gray-500">Functions</p></div>
                        <div><p class="text-2xl font-bold">1.5k</p><p class="text-sm text-gray-500">Executions/min</p></div>
                        <div><p class="text-2xl font-bold text-yellow-500">2</p><p class="text-sm text-gray-500">Throttled Functions</p></div>
                        <div><p class="text-2xl font-bold">$450</p><p class="text-sm text-gray-500">Monthly Cost</p></div>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Serverless computing with AWS Lambda offers agility, automatic scaling, and a pay-per-execution cost model. Adopting a "micro-function" approach over a "Lambdalith" optimizes cost, security, and scalability. Prioritizing event-driven communication via services like API Gateway and SQS prevents tight coupling. Using patterns like "Storage First" enhances resilience by persisting data before processing begins.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage functions in <span class="font-semibold">AWS Lambda</span> console. Configure API endpoints in <span class="font-semibold">API Gateway</span>. Monitor metrics in <span class="font-semibold">CloudWatch</span>. Orchestrate complex serverless workflows with <span class="font-semibold">AWS Step Functions</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Lambda Concurrency - AWS CLI):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-lambda-concurrency-config"><code># AWS CLI command to set reserved concurrency for a Lambda function
aws lambda update-function-configuration \
    --function-name my-critical-function \
    --reserved-concurrent-executions 100</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Lambda throttling occurs when invocation rates exceed configured concurrency limits. Cold starts can also impact latency, especially for functions with large deployment packages or complex initialization.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> CloudWatch Logs for the specific Lambda function (e.g., `/aws/lambda/my-function`). Look for `REPORT` lines for duration and billed duration, and `THROTTLED` messages.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-lambda-log-snippet"><code>2025-07-03T19:00:00Z [ERROR] Lambda function 'my-api-handler' was throttled. Max concurrency: 10, Current invocations: 11.
REPORT RequestId: abc-def-ghi Duration: 1000.00 ms Billed Duration: 1000 ms Memory Size: 128 MB Max Memory Used: 128 MB Init Duration: 100.00 ms XRAY TraceId: ... SegmentId: ... Reserved Concurrency: 10</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Adopt a "micro-function" approach to optimize cost, security, and scalability.</li>
                            <li>Prioritize event-driven communication using API Gateway, SQS, SNS, EventBridge.</li>
                            <li>Utilize the "Storage First" pattern for mission-critical asynchronous workflows.</li>
                            <li>Configure appropriate memory and timeout settings for Lambda functions.</li>
                            <li>Implement Dead-Letter Queues (DLQs) for asynchronous invocations to handle failures.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For throttled functions, check CloudWatch metrics for `Throttles` and `ConcurrentExecutions`.</li>
                            <li>Analyze Lambda logs for errors, timeouts, or excessive memory usage.</li>
                            <li>If cold starts are an issue, consider Provisioned Concurrency for critical paths.</li>
                            <li>Verify IAM permissions for Lambda execution role if resources cannot be accessed.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Mitigate cold starts using <span class="font-semibold">Provisioned Concurrency</span> for critical functions. Utilize <span class="font-semibold">Lambda Layers</span> to manage dependencies and reduce deployment package size. Implement <span class="font-semibold">Dead-Letter Queues (DLQs)</span> for asynchronous invocations to capture failed events.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Data Pipeline Management</h3>
                    <p class="text-sm text-gray-500">ETL and data processing status.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">15</p><p class="text-sm text-gray-500">Active Pipelines</p></div>
                        <div><p class="text-2xl font-bold">2.1TB</p><p class="text-sm text-gray-500">Data Processed Daily</p></div>
                        <div class="col-span-2"><p class="text-2xl font-bold text-green-600">99.9%</p><p class="text-sm text-gray-500">Reliability</p></div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Well-designed data pipelines are critical for analytics and business intelligence. AWS Glue serves as a powerful serverless ETL service for batch processing, while Amazon Kinesis enables real-time data streaming. Choosing the right analytics tool—Redshift for structured data warehousing or Athena for ad-hoc queries on S3 data lakes—depends on specific data structures and query patterns.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage ETL jobs in <span class="font-semibold">AWS Glue</span>. Configure data streams in <span class="font-semibold">Amazon Kinesis</span>. Query data in <span class="font-semibold">Amazon Athena</span> or <span class="font-semibold">Amazon Redshift</span>. For data governance, use <span class="font-semibold">AWS Lake Formation</span>. For business intelligence dashboards, consider <span class="font-semibold">Amazon QuickSight</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Glue Job Definition - JSON):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-glue-config"><code>{
  "Name": "s3-to-redshift-etl",
  "Role": "arn:aws:iam::123456789012:role/GlueServiceRole",
  "Command": {
    "Name": "glueetl",
    "ScriptLocation": "s3://aws-glue-scripts-123456789012-us-east-1/my_script.py",
    "PythonVersion": "3"
  },
  "MaxCapacity": 0.5,
  "WorkerType": "Standard",
  "NumberOfWorkers": 2,
  "Connections": { "Connections": ["redshift-conn"] },
  "DefaultArguments": { "--job-bookmark-option": "job-bookmark-enable" }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Data pipeline failures often involve schema mismatches, connectivity issues to data sources/sinks, or insufficient permissions.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> AWS Glue job logs in CloudWatch Logs, Kinesis stream metrics in CloudWatch. For S3 data lakes, S3 Access Logs can provide insights into data access patterns.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="arch-glue-log-snippet"><code>2025-07-03T20:00:00Z [ERROR] Glue Job 's3-to-redshift-etl': Schema mismatch detected. Column 'price' expected as DECIMAL, found STRING.
2025-07-03T20:00:01Z [INFO] Kinesis: PutRecords failed for 2 records - ProvisionedThroughputExceededException.</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Utilize AWS Glue for robust ETL processes and Glue Workflows for orchestration.</li>
                            <li>Implement Amazon Kinesis for real-time data ingestion and processing.</li>
                            <li>Choose analytics tools (Redshift vs. Athena) based on data structure and query patterns.</li>
                            <li>Design for data quality and schema evolution, handling potential mismatches.</li>
                            <li>Secure data at rest and in transit throughout the pipeline.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For Glue job failures, check CloudWatch Logs for detailed error messages and stack traces.</li>
                            <li>Verify connectivity to data sources and targets (e.g., S3, RDS, Redshift).</li>
                            <li>Examine schema definitions in Glue Data Catalog if schema mismatch errors occur.</li>
                            <li>For Kinesis issues, check CloudWatch metrics for `WriteProvisionedThroughputExceeded` or `ReadProvisionedThroughputExceeded`.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Design your data lake on <span class="font-semibold">Amazon S3</span>. Implement <span class="font-semibold">data cataloging</span> using AWS Glue Data Catalog. For real-time analytics, consider <span class="font-semibold">Amazon Kinesis Data Analytics</span>.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

            </div>
        </section>
        
        <section id="security" class="content-section">
             <h2 class="text-2xl font-bold mb-1">Security & Compliance Posture</h2>
             <p class="text-gray-600 mb-6">Assess your organization's security and compliance posture. This area covers foundational identity and access management, adherence to regulatory standards, and robust network security controls to protect your AWS resources.</p>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">IAM & Access Control</h3>
                    <p class="text-sm text-gray-500">User and role-based security status.</p>
                    <div class="mt-4">
                        <div class="chart-container h-64 sm:h-80">
                            <canvas id="iamMfaChart"></canvas>
                        </div>
                        <div class="mt-4 text-center">
                            <p class="text-xl font-bold text-red-600">5 <span class="text-base font-normal text-gray-500">Policy Violations</span></p>
                        </div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">IAM is the foundation of cloud security. Strictly adhering to the principle of least privilege—granting only minimum necessary permissions—is critical. Enforcing Multi-Factor Authentication (MFA) adds an essential security layer. Regularly auditing for unused entities and overly permissive policies helps prevent "permission sprawl" and reduces the attack surface.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage users, groups, roles, and policies in <span class="font-semibold">IAM console</span>. Review activity in <span class="font-semibold">AWS CloudTrail</span>. Use <span class="font-semibold">IAM Access Analyzer</span> for policy validation. For centralized identity, use <span class="font-semibold">AWS IAM Identity Center (SSO)</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (IAM Policy - Least Privilege):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-iam-policy-config"><code>{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Action": [
        "s3:GetObject",
        "s3:ListBucket"
      ],
      "Resource": [
        "arn:aws:s3:::my-app-data-bucket",
        "arn:aws:s3:::my-app-data-bucket/*"
      ]
    },
    {
      "Effect": "Deny",
      "Action": "s3:*",
      "Resource": "arn:aws:s3:::my-sensitive-data-bucket/*",
      "Condition": {
        "StringNotLike": { "aws:userid": ["AROAEXAMPLEUSERID:*"] }
      }
    }
  ]
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            `AccessDenied` errors are common when IAM policies are too restrictive or misconfigured.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> AWS CloudTrail for API call failures, CloudWatch Logs for application-specific access errors.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-iam-log-snippet"><code>{
  "eventSource": "s3.amazonaws.com",
  "eventName": "GetObject",
  "eventTime": "2025-07-03T21:00:00Z",
  "errorCode": "AccessDenied",
  "errorMessage": "Access Denied",
  "requestParameters": { "bucketName": "my-app-data-bucket", "key": "private/document.pdf" },
  "userIdentity": { "arn": "arn:aws:iam::123456789012:user/devuser" }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Strictly adhere to the principle of least privilege for all IAM users and roles.</li>
                            <li>Enforce Multi-Factor Authentication (MFA) for all privileged users and the root account.</li>
                            <li>Regularly audit IAM configurations for unused entities and overly permissive policies.</li>
                            <li>Utilize IAM Roles for applications and services instead of long-lived credentials.</li>
                            <li>Leverage IAM Access Analyzer to identify unintended external access to your resources.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For `AccessDenied` errors, use IAM Policy Simulator to test policy effects.</li>
                            <li>Examine CloudTrail logs for the exact API call that was denied and the associated user/role.</li>
                            <li>Check the resource-based policy (e.g., S3 bucket policy) if an IAM identity-based policy seems correct.</li>
                            <li>Use IAM Access Analyzer to review external access to your resources.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Implement <span class="font-semibold">Identity Federation</span> with your corporate directory (e.g., Active Directory, Okta) using SAML 2.0. Utilize <span class="font-semibold">IAM Roles</span> for granting temporary, scoped permissions to applications and services, rather than long-lived credentials. Employ <span class="font-semibold">Session Tags</span> for fine-grained access control based on session attributes.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Compliance Status</h3>
                    <p class="text-sm text-gray-500">Adherence to monitored standards.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">3</p><p class="text-sm text-gray-500">Standards Monitored</p></div>
                        <div><p class="text-2xl font-bold text-green-600">95%</p><p class="text-sm text-gray-500">Compliance Rate</p></div>
                        <div class="col-span-2"><p class="text-2xl font-bold text-red-600">2</p><p class="text-sm text-gray-500">Issues Detected</p></div>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Meeting regulatory standards like HIPAA, GDPR, and PCI-DSS is crucial. The AWS Shared Responsibility Model dictates that while AWS secures the cloud, the customer is responsible for security *in* the cloud. Services like AWS Config and Security Hub enable continuous compliance monitoring by assessing resource configurations against predefined rules, providing a centralized view of adherence.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Review compliance rules and findings in <span class="font-semibold">AWS Config</span>. Get an aggregated compliance score and findings in <span class="font-semibold">AWS Security Hub</span>. For audit evidence collection, use <span class="font-semibold">AWS Audit Manager</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (AWS Config Rule - JSON/CLI):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-config-rule-config"><code># AWS Config rule to check if S3 buckets are public
{
  "ConfigRuleName": "s3-bucket-public-read-prohibited",
  "Description": "Checks if your Amazon S3 buckets are publicly readable.",
  "Scope": { "ComplianceResourceTypes": ["AWS::S3::Bucket"] },
  "Source": {
    "Owner": "AWS",
    "SourceIdentifier": "S3_BUCKET_PUBLIC_READ_PROHIBITED",
    "MessageType": "ConfigurationItemChangeNotification"
  },
  "InputParameters": "{}"
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            A common compliance issue is an S3 bucket configured for public access, or an EC2 instance without an associated IAM role.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> AWS Config timeline for resource changes, Security Hub findings for non-compliant resources. CloudTrail logs can show who made the non-compliant change.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-compliance-log-snippet"><code>{
  "complianceType": "NON_COMPLIANT",
  "configRuleName": "s3-bucket-public-read-prohibited",
  "resourceType": "AWS::S3::Bucket",
  "resourceId": "my-public-bucket-123",
  "annotation": "This S3 bucket has a public read access policy."
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Understand and adhere to the AWS Shared Responsibility Model.</li>
                            <li>Utilize AWS Config for continuous assessment of resource configurations against compliance rules.</li>
                            <li>Leverage AWS Security Hub to aggregate and centralize compliance findings.</li>
                            <li>Ensure all sensitive data is encrypted at rest and in transit.</li>
                            <li>Implement AWS Organizations Service Control Policies (SCPs) for guardrails across accounts.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If a resource is non-compliant, check its configuration history in AWS Config to identify the change.</li>
                            <li>Review CloudTrail logs to determine who made the non-compliant change.</li>
                            <li>Verify that AWS Config rules are properly enabled and configured for relevant resource types.</li>
                            <li>For BAA-related issues, ensure only HIPAA-eligible services are used and correctly configured.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Ensure all sensitive data is <span class="font-semibold">encrypted at rest and in transit</span> using AWS Key Management Service (KMS) or AWS CloudHSM. Implement <span class="font-semibold">AWS Organizations Service Control Policies (SCPs)</span> to enforce guardrails across multiple accounts.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>
                
                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Network Security Audit</h3>
                    <p class="text-sm text-gray-500">Security Group and firewall status.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                         <div><p class="text-2xl font-bold">120</p><p class="text-sm text-gray-500">Security Groups</p></div>
                        <div><p class="text-2xl font-bold text-red-600">8</p><p class="text-sm text-gray-500">Open Ports</p></div>
                         <div class="col-span-2"><p class="text-2xl font-bold text-red-600">3</p><p class="text-sm text-gray-500">Risks Detected</p></div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Security Groups are a fundamental network control. Applying the principle of least privilege to network access—restricting traffic to only what is absolutely necessary—is critical. AWS WAF provides an additional layer of defense against common web attacks like SQL injection and XSS. Regular audits of security group rules and WAF logs are essential to identify potential exposures and refine security posture.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage Security Groups and NACLs in <span class="font-semibold">VPC console</span>. Configure and monitor WAF rules in <span class="font-semibold">AWS WAF console</span>. Analyze network traffic with <span class="font-semibold">VPC Flow Logs</span> (viewable in CloudWatch Logs). For centralized network security, consider <span class="font-semibold">AWS Network Firewall</span> and <span class="font-semibold">AWS Transit Gateway</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Security Group Ingress Rule - JSON):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-sg-config"><code>{
  "IpPermissions": [
    {
      "FromPort": 80,
      "ToPort": 80,
      "IpProtocol": "tcp",
      "IpRanges": [ { "CidrIp": "0.0.0.0/0" } ] # DANGER: Public access
    },
    {
      "FromPort": 22,
      "ToPort": 22,
      "IpProtocol": "tcp",
      "IpRanges": [ { "CidrIp": "203.0.113.0/24" } ] # Restricted to specific IP range
    }
  ],
  "GroupId": "sg-0abcdef1234567890"
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Unintended public access via a security group, or blocked legitimate traffic due to overly restrictive rules.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> VPC Flow Logs in CloudWatch Logs for denied traffic, AWS WAF logs for blocked web requests.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="security-network-log-snippet"><code># VPC Flow Log entry for denied traffic
2 123456789012 eni-0abcdef1234567890 192.0.2.10 54.1.2.3 443 12345 6 1 40 1678886400 1678886460 REJECT OK
# AWS WAF Log entry for blocked request
{
  "timestamp": 1678886400000,
  "action": "BLOCK",
  "terminatingRuleId": "AWS-AWSManagedRulesKnownBadInputsRuleSet_1.0_GenericLFI_BODY",
  "httpRequest": {
    "clientIp": "198.51.100.10",
    "country": "US",
    "headers": [ { "name": "User-Agent", "value": "BadBot/1.0" } ],
    "uri": "/etc/passwd",
    "args": "",
    "httpVersion": "HTTP/1.1",
    "query": ""
  }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Configure Security Groups with the principle of least privilege.</li>
                            <li>Deploy AWS WAF for application-layer protection against web exploits.</li>
                            <li>Enable VPC Flow Logs for network traffic visibility and anomaly detection.</li>
                            <li>Regularly audit Security Group rules and WAF configurations.</li>
                            <li>Utilize Network Access Control Lists (NACLs) for subnet-level stateless filtering.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If traffic is unexpectedly blocked, check Security Group and NACL rules for conflicts or overly restrictive settings.</li>
                            <li>Analyze VPC Flow Logs for `REJECT` actions to identify blocked traffic patterns.</li>
                            <li>Review AWS WAF logs to see if legitimate requests are being blocked by WAF rules.</li>
                            <li>Use `reachability analyzer` in VPC to diagnose network path issues.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Design a robust <span class="font-semibold">VPC architecture</span> with public and private subnets, NAT Gateways, and VPC Endpoints. Implement <span class="font-semibold">Network Access Control Lists (NACLs)</span> as a stateless firewall layer at the subnet level for additional control.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

            </div>
        </section>

        <section id="automation" class="content-section">
            <h2 class="text-2xl font-bold mb-1">Automation & Infrastructure as Code (IaC)</h2>
            <p class="text-gray-600 mb-6">Review the state of your infrastructure automation. This section covers IaC state management, drift detection, and configuration automation, which are essential for creating consistent, reliable, and auditable cloud deployments.</p>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">

                 <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Terraform State</h3>
                    <p class="text-sm text-gray-500">IaC management and consistency.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">50</p><p class="text-sm text-gray-500">Workspaces</p></div>
                        <div><p class="text-2xl font-bold">200</p><p class="text-sm text-gray-500">Resources</p></div>
                        <div class="col-span-2"><p class="text-2xl font-bold text-green-600">100%</p><p class="text-sm text-gray-500">Sync Status</p></div>
                    </div>
                     <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Terraform uses state files to map configuration to real-world resources. Effective state management is vital for team collaboration. Using a remote backend like S3 with DynamoDB for state locking prevents concurrent modifications and simultaneous modifications from multiple users, thereby reducing errors. Enabling S3 bucket versioning provides a history of changes, facilitating recovery from corruption or accidental deletion.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> S3 buckets for state files (<span class="font-semibold">S3 console</span>). DynamoDB table for state locking (<span class="font-semibold">DynamoDB console</span>). Manage workspaces via <span class="font-semibold">Terraform CLI</span> (`terraform workspace`).
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Terraform S3 Backend):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-terraform-backend-config"><code>terraform {
  backend "s3" {
    bucket         = "my-terraform-state-bucket"
    key            = "path/to/my/state.tfstate"
    region         = "us-east-1"
    dynamodb_table = "terraform-lock-table"
    encrypt        = true
  }
}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            State locking errors occur when multiple users try to apply changes simultaneously, or when a lock is not properly released.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> Terraform CLI output, DynamoDB table for lock entries.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-terraform-log-snippet"><code>Error: Error acquiring the state lock
    
    Error message: ConditionalCheckFailedException: The conditional request failed.
    Lock Info:
      ID: 12345678-abcd-efgh-ijkl-1234567890ab
      Path: my-terraform-state-bucket/path/to/my/state.tfstate
      Operation: OperationTypeApply
      Who: user@hostname
      Version: 0.14.0
      Created: 2025-07-03T22:00:00Z
      Expires: 2025-07-03T22:05:00Z
    
    Terraform acquires a state lock to protect the state from being
    concurrently updated by multiple working directories. To release this
    lock, run "terraform force-unlock".</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Always use a remote backend (e.g., S3) for collaborative state management.</li>
                            <li>Implement state locking (e.g., DynamoDB) to prevent concurrent modifications.</li>
                            <li>Enable S3 bucket versioning for state files for recovery from accidental changes.</li>
                            <li>Apply strict access control policies to your S3 state bucket.</li>
                            <li>Utilize Terraform Workspaces for managing multiple environments.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>If `Error acquiring the state lock` occurs, identify the user holding the lock and consider `terraform force-unlock` if safe.</li>
                            <li>For state corruption, attempt to revert to a previous version using S3 bucket versioning.</li>
                            <li>Verify IAM permissions for Terraform execution if state operations fail.</li>
                            <li>Ensure consistent Terraform CLI versions across team members to avoid state compatibility issues.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Utilize <span class="font-semibold">Terraform Workspaces</span> to manage multiple environments (dev, staging, prod) from a single configuration. Understand <span class="font-semibold">`terraform state mv`</span> for refactoring resources within the state file.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>
                
                <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">CloudFormation Status</h3>
                    <p class="text-sm text-gray-500">Stack health and drift detection.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">25</p><p class="text-sm text-gray-500">Stacks</p></div>
                        <div><p class="text-2xl font-bold text-green-600">98%</p><p class="text-sm text-gray-500">Success Rate</p></div>
                        <div><p class="text-2xl font-bold">10 min</p><p class="text-sm text-gray-500">Avg. Deploy Time</p></div>
                        <div><p class="text-2xl font-bold text-yellow-500">1</p><p class="text-sm text-gray-500">In Rollback</p></div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">CloudFormation enables declarative infrastructure provisioning. Drift occurs when the actual state of the infrastructure deviates from the configuration defined in the CloudFormation templates, often due to manual changes. This undermines IaC principles and can lead to non-compliance or unexpected costs. CloudFormation's built-in drift detection is crucial for identifying these discrepancies and maintaining configuration consistency.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Manage stacks and view events in <span class="font-semibold">CloudFormation console</span>. Initiate drift detection from the stack details page or via AWS CLI (`aws cloudformation detect-stack-drift`).
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (CloudFormation Template Snippet):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-cloudformation-template-config"><code>Resources:
  MyEC2Instance:
    Type: AWS::EC2::Instance
    Properties:
      ImageId: ami-0abcdef1234567890
      InstanceType: t2.micro
      Tags:
        - Key: Name
          Value: MyWebAppServer
      SecurityGroupIds:
        - !Ref WebServerSecurityGroup

Outputs:
  InstanceId:
    Description: The ID of the EC2 instance
    Value: !Ref MyEC2Instance</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Stack update failures often occur due to invalid parameters, resource conflicts, or missing dependencies. Rollbacks are triggered automatically upon failure.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> CloudFormation stack events in the CloudFormation console (Events tab).
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-cloudformation-log-snippet"><code>2025-07-03T23:00:00Z UPDATE_FAILED AWS::EC2::SecurityGroup WebServerSecurityGroup The security group 'sg-0abcdef1234567890' does not exist.
2025-07-03T23:00:01Z UPDATE_ROLLBACK_IN_PROGRESS AWS::CloudFormation::Stack MyWebAppStack The following resource(s) failed to create: [WebServerSecurityGroup].</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Regularly perform CloudFormation drift detection.</li>
                            <li>Minimize manual changes to CloudFormation-managed resources.</li>
                            <li>Leverage CloudFormation events with EventBridge for automated responses to stack failures.</li>
                            <li>Use Change Sets to preview proposed changes before execution.</li>
                            <li>Employ Nested Stacks for reusable components and complex deployments.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For `UPDATE_FAILED` or `CREATE_FAILED` events, examine the specific resource event for the error message.</li>
                            <li>Check IAM permissions for the CloudFormation service role if resource creation fails due to access issues.</li>
                            <li>If a stack is stuck in `UPDATE_ROLLBACK_FAILED`, manually resolve the underlying issue and attempt to continue rollback or delete the stack.</li>
                            <li>Use `CloudFormation Linter` for template validation before deployment.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Use <span class="font-semibold">CloudFormation Change Sets</span> to preview proposed changes before executing a stack update. Employ <span class="font-semibold">Nested Stacks</span> to create reusable components and manage complex deployments. Implement <span class="font-semibold">Custom Resources</span> for managing resources not natively supported by CloudFormation.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

                 <div class="kpi-card rounded-lg p-6">
                    <h3 class="font-semibold text-lg">Ansible Playbook Runs</h3>
                    <p class="text-sm text-gray-500">Configuration management status.</p>
                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div><p class="text-2xl font-bold">40</p><p class="text-sm text-gray-500">Playbooks</p></div>
                        <div><p class="text-2xl font-bold text-green-600">95%</p><p class="text-sm text-gray-500">Success Rate</p></div>
                        <div><p class="text-2xl font-bold">20 min</p><p class="text-sm text-gray-500">Avg. Run Time</p></div>
                        <div><p class="text-2xl font-bold text-red-600">2</p><p class="text-sm text-gray-500">Failed Runs</p></div>
                    </div>
                    <div class="details hidden">
                        <h4 class="font-semibold text-md mt-4">Technical Deep Dive:</h4>
                        <p class="text-sm text-gray-600">Ansible automates software provisioning and configuration management. The principle of idempotency—ensuring a playbook yields the same outcome whether run once or multiple times—is fundamental to its reliability. Version controlling playbooks and adhering to best practices for code quality are paramount for maintaining dependable and maintainable automation.</p>
                        <p class="text-sm text-gray-600 mt-2">
                            <strong>Tool Navigation:</strong> Ansible is typically run from a control node (e.g., EC2 instance). Logs are usually found on the control node or integrated into CI/CD pipeline logs (e.g., CodeBuild logs). For remote execution without SSH, consider <span class="font-semibold">AWS Systems Manager Run Command</span>.
                        </p>
                        <h5 class="font-semibold text-sm mt-3">Configuration Example (Ansible Playbook Snippet):</h5>
                        <div class="code-block">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-ansible-playbook-config"><code>---
- name: Configure Nginx web server
  hosts: webservers
  become: yes
  tasks:
    - name: Ensure nginx is installed
      ansible.builtin.apt:
        name: nginx
        state: present
        update_cache: yes

    - name: Copy nginx configuration file
      ansible.builtin.copy:
        src: files/nginx.conf
        dest: /etc/nginx/nginx.conf
        owner: root
        group: root
        mode: '0644'
      notify: Restart nginx

  handlers:
    - name: Restart nginx
      ansible.builtin.service:
        name: nginx
        state: restarted</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Common Error & Log Example:</h5>
                        <p class="text-sm text-gray-600">
                            Playbook failures often occur due to incorrect permissions, missing packages on target hosts, or network connectivity issues.
                        </p>
                        <p class="text-sm text-gray-600 mt-1">
                            <strong>Log Location:</strong> Ansible CLI output on the control node, `/var/log/syslog` or application-specific logs on target EC2 instances.
                        </p>
                        <div class="log-snippet">
                            <button class="copy-btn" onclick="copyToClipboard(this)">Copy</button>
                            <pre id="automation-ansible-log-snippet"><code>PLAY [Configure Nginx web server] **********************************************

TASK [Ensure nginx is installed] ***********************************************
fatal: [webserver1]: FAILED! => {"changed": false, "msg": "Could not fetch URL https://apt.releases.hashicorp.com/dists/jammy/InRelease: 403 Forbidden", "rc": 100, "stderr": "", "stderr_lines": [], "stdout": "Hit:1 http://us.archive.ubuntu.com/ubuntu jammy InRelease\n", "stdout_lines": ["Hit:1 http://us.archive.ubuntu.com/ubuntu jammy InRelease"]}</code></pre>
                        </div>
                        <h5 class="font-semibold text-sm mt-3">Best Practices:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>Design all Ansible playbooks to be idempotent.</li>
                            <li>Store all Ansible artifacts under version control.</li>
                            <li>Adhere to best practices for playbook development (simplicity, readability, comments).</li>
                            <li>Use dynamic inventory with EC2 tags for host discovery.</li>
                            <li>Integrate Ansible with AWS Systems Manager State Manager for continuous compliance.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Troubleshooting Tips:</h5>
                        <ul class="list-disc list-inside text-sm text-gray-600 mt-2">
                            <li>For failed tasks, examine the Ansible CLI output for the exact error message.</li>
                            <li>Verify network connectivity and SSH access to target hosts.</li>
                            <li>Check permissions on target hosts for files/directories Ansible is trying to modify.</li>
                            <li>Use `ansible-playbook --check` for dry runs to identify potential issues before execution.</li>
                        </ul>
                        <h5 class="font-semibold text-sm mt-3">Advanced Considerations:</h5>
                        <p class="text-sm text-gray-600">Use <span class="font-semibold">dynamic inventory</span> with EC2 tags to automatically discover target hosts. Integrate Ansible with <span class="font-semibold">AWS Systems Manager State Manager</span> for continuous configuration compliance.</p>
                    </div>
                    <button class="view-details-btn mt-4 px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition duration-200">View Details</button>
                </div>

            </div>
        </section>
    </main>

    <!-- Modal Structure -->
    <div id="detailsModalOverlay" class="modal-overlay">
        <div class="modal-content">
            <button id="closeModalBtn" class="modal-close-button">&times;</button>
            <div id="modalContentArea" class="prose max-w-none">
                <!-- Content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const data = {
                infraHealth: {
                    regions: ['us-east-1 (Prod)', 'us-west-2 (Dev)', 'eu-west-1 (Staging)', 'ap-southeast-1 (DR)'],
                    cpu: [67, 72, 65, 89],
                    memory: [71, 68, 73, 89]
                },
                cost: {
                    labels: ['EC2 Compute', 'RDS Databases', 'S3 Storage', 'Lambda Functions', 'Data Transfer', 'Other Services'],
                    values: [9876.45, 3456.78, 2134.56, 850.20, 1200.50, 881.51]
                },
                securityScan: {
                    labels: ['Critical', 'High', 'Medium', 'Low'],
                    values: [3, 12, 45, 20]
                },
                iam: {
                    labels: ['MFA Enabled', 'MFA Disabled', 'Inactive Users'],
                    values: [98, 2, 5]
                },
                buildSuccessTrend: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                    data: [88, 90, 92, 89, 93, 92] // Example success rate trend
                }
            };
            
            const chartColors = {
                cpu: 'rgba(59, 130, 246, 0.7)',
                memory: 'rgba(16, 185, 129, 0.7)',
                cost: ['#ef4444', '#f97316', '#f59e0b', '#84cc16', '#3b82f6', '#6366f1'],
                security: ['#dc2626', '#f97316', '#f59e0b', '#6b7280'],
                iam: ['#10b981', '#ef4444', '#f59e0b'],
                buildSuccess: '#4f46e5'
            };

            function createBarChart(ctx, labels, datasets, yAxisLabel) {
                return new Chart(ctx, {
                    type: 'bar',
                    data: { labels: labels, datasets: datasets },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { beginAtZero: true, title: { display: true, text: yAxisLabel } },
                            x: { grid: { display: false } }
                        },
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.formattedValue}${yAxisLabel.includes('%') ? '%' : ''}`;
                                    }
                                }
                            }
                        },
                        barPercentage: 0.6,
                        categoryPercentage: 0.7
                    }
                });
            }
            
            function createDonutOrPieChart(ctx, type, labels, data, chartColors) {
                return new Chart(ctx, {
                    type: type,
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Distribution',
                            data: data,
                            backgroundColor: chartColors,
                            borderColor: '#ffffff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { position: 'bottom', labels: { boxWidth: 12, padding: 15 } },
                            tooltip: { enabled: true }
                        }
                    }
                });
            }

            function createLineChart(ctx, labels, data, label, color) {
                return new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: label,
                            data: data,
                            borderColor: color,
                            backgroundColor: 'rgba(79, 70, 229, 0.2)',
                            fill: true,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { beginAtZero: true, title: { display: true, text: 'Success Rate (%)' } },
                            x: { grid: { display: false } }
                        },
                        plugins: {
                            legend: { position: 'top' },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `${context.dataset.label}: ${context.formattedValue}%`;
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            const regionHealthCtx = document.getElementById('regionHealthChart')?.getContext('2d');
            if(regionHealthCtx) {
                createBarChart(regionHealthCtx, data.infraHealth.regions, [
                    { label: 'CPU Utilization', data: data.infraHealth.cpu, backgroundColor: chartColors.cpu },
                    { label: 'Memory Utilization', data: data.infraHealth.memory, backgroundColor: chartColors.memory }
                ], 'Utilization (%)');
            }
            
            const costBreakdownCtx = document.getElementById('costBreakdownChart')?.getContext('2d');
            if(costBreakdownCtx) {
                createDonutOrPieChart(costBreakdownCtx, 'doughnut', data.cost.labels, data.cost.values, chartColors.cost);
            }
            
            const securityScanCtx = document.getElementById('securityScanChart')?.getContext('2d');
            if(securityScanCtx) {
                createBarChart(securityScanCtx, data.securityScan.labels, [
                    { label: 'Findings', data: data.securityScan.values, backgroundColor: chartColors.security }
                ], 'Number of Findings');
            }

            const buildSuccessTrendCtx = document.getElementById('buildSuccessTrendChart')?.getContext('2d');
            if(buildSuccessTrendCtx) {
                createLineChart(buildSuccessTrendCtx, data.buildSuccessTrend.labels, data.buildSuccessTrend.data, 'Build Success Rate', chartColors.buildSuccess);
            }
            
            const iamMfaCtx = document.getElementById('iamMfaChart')?.getContext('2d');
            if(iamMfaCtx) {
                createDonutOrPieChart(iamMfaCtx, 'pie', data.iam.labels, data.iam.values, chartColors.iam);
            }

            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('.content-section');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    navLinks.forEach(l => l.classList.remove('active'));
                    sections.forEach(s => s.classList.remove('active'));
                    
                    link.classList.add('active');
                    const sectionId = link.getAttribute('data-section');
                    document.getElementById(sectionId)?.classList.add('active');
                });
            });

            // Modal Logic
            const detailsModalOverlay = document.getElementById('detailsModalOverlay');
            const closeModalBtn = document.getElementById('closeModalBtn');
            const modalContentArea = document.getElementById('modalContentArea');
            const viewDetailsButtons = document.querySelectorAll('.view-details-btn');

            viewDetailsButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const card = button.closest('.kpi-card');
                    const detailsContent = card.querySelector('.details').innerHTML;
                    
                    modalContentArea.innerHTML = detailsContent;
                    detailsModalOverlay.classList.add('show');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling background
                });
            });

            closeModalBtn.addEventListener('click', () => {
                detailsModalOverlay.classList.remove('show');
                document.body.style.overflow = ''; // Restore scrolling
            });

            detailsModalOverlay.addEventListener('click', (e) => {
                if (e.target === detailsModalOverlay) {
                    detailsModalOverlay.classList.remove('show');
                    document.body.style.overflow = ''; // Restore scrolling
                }
            });

            // Copy to Clipboard Functionality
            window.copyToClipboard = function(button) {
                const preElement = button.nextElementSibling; // The <pre> tag is the next sibling
                const text = preElement.innerText;
                
                // Use document.execCommand('copy') for broader compatibility in iframes
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                    button.classList.add('copied');
                    button.innerText = 'Copied!';
                    setTimeout(() => {
                        button.classList.remove('copied');
                        button.innerText = 'Copy';
                    }, 2000);
                } catch (err) {
                    console.error('Failed to copy: ', err);
                    // Fallback for older browsers or if execCommand fails
                    alert('Failed to copy. Please select and copy manually.');
                }
                document.body.removeChild(textarea);
            };
        });
    </script>
</body>
</html>
